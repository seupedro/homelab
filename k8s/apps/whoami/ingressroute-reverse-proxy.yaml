apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    name: whoami
    namespace: whoami
    labels:
        app: whoami
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: Host(`whoami.pane.run`)
          # No middlewares - OAuth2-Proxy handles authentication internally
          services:
              # Route to OAuth2-Proxy instead of whoami directly
              - name: oauth2-proxy
                namespace: auth
                port: 80
    tls:
        secretName: whoami-tls
